"use strict";var PartialEvaluator=(function PartialEvaluatorClosure(){function c(B,C,z,w,y,x,A){this.state=new EvalState();this.stateStack=[];this.pdfManager=B;this.xref=C;this.handler=z;this.pageIndex=w;this.uniquePrefix=y;this.idCounters=x;this.fontCache=A}var p=1,f=2;c.prototype={hasBlendModes:function s(A){if(!isDict(A)){return false}var w=[A];while(w.length){var B=w.shift();var z=B.get("ExtGState");if(isDict(z)){z=z.getAll();for(var E in z){var x=z[E];var y=x.BM;if(isName(y)&&y.name!=="Normal"){return true}}}var F=B.get("XObject");if(!isDict(F)){continue}F=F.getAll();for(var E in F){var C=F[E];if(!isStream(C)){continue}var D=C.dict.get("Resources");if(isDict(D)&&D!==B){w.push(D)}}}return false},buildFormXObject:function j(z,y,G,A,w){var D=y.dict.get("Matrix");var F=y.dict.get("BBox");var E=y.dict.get("Group");if(E){var x={matrix:D,bbox:F,smask:G,isolated:false,knockout:false};var C=E.get("S");if(isName(C)&&C.name==="Transparency"){x.isolated=(E.get("I")||false);x.knockout=(E.get("K")||false);var B=E.get("CS");x.colorSpace=(B?ColorSpace.parseToIR(B,this.xref,z):null)}A.addOp(OPS.beginGroup,[x])}A.addOp(OPS.paintFormXObjectBegin,[D,F]);this.getOperatorList(y,(y.dict.get("Resources")||z),A,w);A.addOp(OPS.paintFormXObjectEnd,[]);if(E){A.addOp(OPS.endGroup,[x])}},buildPaintImageXObject:function m(U,P,C,R,F,K){var M=this;var D=P.dict;var I=D.get("Width","W");var T=D.get("Height","H");if(PDFJS.maxImageSize!==-1&&I*T>PDFJS.maxImageSize){warn("Image exceeded maximum allowed size and was removed.");return}var O=(D.get("ImageMask","IM")||false);if(O){var Q=D.get("Width","W");var N=D.get("Height","H");var E=(Q+7)>>3;var y=P.getBytes(E*N);var L=D.get("Decode","D");var J=P instanceof DecodeStream;var B=(!!L&&L[0]>0);var V=PDFImage.createMask(y,Q,N,J,B);V.cached=true;var z=[V];R.addOp(OPS.paintImageMaskXObject,z);if(F){K.key=F;K.fn=OPS.paintImageMaskXObject;K.args=z}return}var G=(D.get("SMask","SM")||false);var S=(D.get("Mask")||false);var W=200;if(C&&!G&&!S&&!(P instanceof JpegStream)&&(I+T)<W){var A=new PDFImage(this.xref,U,P,C,null,null);var V=A.createImageData(true);R.addOp(OPS.paintInlineImageXObject,[V]);return}var x=(this.uniquePrefix||"");var H="img_"+x+(++this.idCounters.obj);R.addDependency(H);var z=[H,I,T];if(!G&&!S&&P instanceof JpegStream&&P.isNativelySupported(this.xref,U)){R.addOp(OPS.paintJpegXObject,z);this.handler.send("obj",[H,this.pageIndex,"JpegStream",P.getIR()]);return}PDFImage.buildImage(function(X){var w=X.createImageData(false);M.handler.send("obj",[H,M.pageIndex,"Image",w],null,[w.data.buffer])},M.handler,M.xref,U,P,C);R.addOp(OPS.paintImageXObject,z);if(F){K.key=F;K.fn=OPS.paintImageXObject;K.args=z}},handleSMask:function l(z,x,A){var y=z.get("G");var w={subtype:z.get("S").name,backdrop:z.get("BC")};this.buildFormXObject(x,y,w,A)},handleTilingType:function g(y,w,B,z,x,C){var A=this.getOperatorList(z,(x.get("Resources")||B));C.addDependencies(A.dependencies);C.addOp(y,getTilingPatternIR({fnArray:A.fnArray,argsArray:A.argsArray},x,w))},handleSetFont:function r(y,C,D,A){var x;if(C){C=C.slice();x=C[0].name}var E=this;var z=this.loadFont(x,D,this.xref,y,A);this.state.font=z;var w=z.loadedName;if(!z.sent){var B=z.translated.exportData();E.handler.send("commonobj",[w,"Font",B]);z.sent=true}return w},handleText:function b(A){var x=this.state.font.translated;var z=x.charsToGlyphs(A);var w=!!(this.state.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);if(x.data&&(w||PDFJS.disableFontFace)){for(var y=0;y<z.length;y++){if(z[y]===null){continue}var B=z[y].fontChar;if(!x.renderer.hasBuiltPath(B)){var C=x.renderer.getPathJs(B);this.handler.send("commonobj",[x.loadedName+"_path_"+B,"FontPath",C])}}}return z},setGState:function d(w,z,x,D){var F=this;function E(K,H,I){switch(H){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":K.push([H,I]);break;case"Font":var G=F.handleSetFont(w,null,I[0],x);x.addDependency(G);K.push([H,[G,I[1]]]);break;case"BM":K.push([H,I]);break;case"SMask":if(isName(I)&&I.name==="None"){K.push([H,false]);break}var J=D.fetchIfRef(I);if(isDict(J)){F.handleSMask(J,w,x);K.push([H,true])}else{warn("Unsupported SMask type")}break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":info("graphic state operator "+H);break;default:info("Unknown graphic state operator "+H);break}}var y=[];var C=z.map;for(var B in C){var A=C[B];E(y,B,A)}x.addOp(OPS.setGState,[y])},loadFont:function k(C,D,x,M,z){function O(){return{translated:new ErrorFont("Font "+C+" is not available"),loadedName:"g_font_error"}}var K;if(D){assert(isRef(D));K=D}else{var B=M.get("Font");if(B){K=B.getRaw(C)}else{warn("fontRes not available");return O()}}if(this.fontCache.has(K)){return this.fontCache.get(K)}D=x.fetchIfRef(K);if(!isDict(D)){return O()}var H=isDict(K);if(!H){this.fontCache.put(K,D)}D.loadedName="g_font_"+(H?C.replace(/\W/g,""):(K.num+"_"+K.gen));if(!D.translated){var J;try{J=this.translateFont(D,x)}catch(N){UnsupportedManager.notify(UNSUPPORTED_FEATURES.font);J=new ErrorFont(N instanceof Error?N.message:N)}D.translated=J}if(D.translated.loadCharProcs){var A=D.get("CharProcs").getAll();var w=(D.get("Resources")||M);var y=Object.keys(A);var I={};for(var L=0,F=y.length;L<F;++L){var P=y[L];var E=A[P];var G=this.getOperatorList(E,w);I[P]=G.getIR();if(!z){continue}z.addDependencies(I.dependencies)}D.translated.charProcOperatorList=I}D.loaded=true;return D},getOperatorList:function u(ae,E,P,K){var D=this;var x=this.xref;var V=this.handler;var F={};P=(P||new OperatorList());E=(E||new Dict());var S=(E.get("XObject")||new Dict());var G=(E.get("Pattern")||new Dict());var ag=new EvaluatorPreprocessor(ae,x);if(K){ag.setState(K)}var Z=new LegacyPromise();var X;while((X=ag.read())){var ab=X.args;var Q=X.fn;switch(Q){case OPS.setStrokeColorN:case OPS.setFillColorN:if(ab[ab.length-1].code){break}var Y=ab[ab.length-1];var z;if(isName(Y)&&(z=G.get(Y.name))){var L=(isStream(z)?z.dict:z);var C=L.get("PatternType");if(C==p){D.handleTilingType(Q,ab,E,z,L,P);ab=[];continue}else{if(C==f){var I=L.get("Shading");var U=L.get("Matrix");var z=Pattern.parseShading(I,U,x,E);ab=z.getIR()}else{error("Unkown PatternType "+C)}}}break;case OPS.paintXObject:if(ab[0].code){break}var H=ab[0].name;if(F.key===H){P.addOp(F.fn,F.args);ab=[];continue}var J=S.get(H);if(J){assertWellFormed(isStream(J),"XObject should be a stream");var ah=J.dict.get("Subtype");assertWellFormed(isName(ah),"XObject should have a Name subtype");if("Form"==ah.name){D.buildFormXObject(E,J,null,P,ag.getState());ab=[];continue}else{if("Image"==ah.name){D.buildPaintImageXObject(E,J,false,P,H,F);ab=[];continue}else{error("Unhandled XObject subtype "+ah.name)}}}break;case OPS.setFont:var O=D.handleSetFont(E,ab,null,P);P.addDependency(O);ab[0]=O;break;case OPS.endInlineImage:var A=ab[0].cacheKey;if(A&&F.key===A){P.addOp(F.fn,F.args);ab=[];continue}D.buildPaintImageXObject(E,ab[0],true,P,A,F);ab=[];continue;case OPS.save:var ac=this.state;this.stateStack.push(this.state);this.state=ac.clone();break;case OPS.restore:var R=this.stateStack.pop();if(R){this.state=R}break;case OPS.showText:ab[0]=this.handleText(ab[0]);break;case OPS.showSpacedText:var M=ab[0];var N=M.length;for(var ad=0;ad<N;++ad){if(isString(M[ad])){M[ad]=this.handleText(M[ad])}}break;case OPS.nextLineShowText:ab[0]=this.handleText(ab[0]);break;case OPS.nextLineSetSpacingShowText:ab[2]=this.handleText(ab[2]);break;case OPS.setTextRenderingMode:this.state.textRenderingMode=ab[0];break;case OPS.setFillColorSpace:case OPS.setStrokeColorSpace:ab=[ColorSpace.parseToIR(ab[0],x,E)];break;case OPS.shadingFill:var aa=E.get("Shading");if(!aa){error("No shading resource found")}var I=aa.get(ab[0].name);if(!I){error("No shading object found")}var w=Pattern.parseShading(I,null,x,E);var B=w.getIR();ab=[B];Q=OPS.shadingFill;break;case OPS.setGState:var T=ab[0];var y=E.get("ExtGState");if(!isDict(y)||!y.has(T.name)){break}var af=y.get(T.name);D.setGState(E,af,P,x);ab=[];continue}P.addOp(Q,ab)}for(var ad=0,W=ag.savedStatesDepth;ad<W;ad++){P.addOp(OPS.restore,[])}return P},getTextContent:function h(ac,C,F){F=(F||new TextState());var ad=[];var W=0.35;var V=1.5;var B=this;var x=this.xref;function E(ah,ai){return B.loadFont(ah,ai,x,C,null)}C=(x.fetchIfRef(C)||new Dict());var Q=null;var O={};var ae=new EvaluatorPreprocessor(ac,x);var S=C;var J=[];var ab=null;var y=0,af=0;var T;while((T=ae.read())){var P=T.fn;var X=T.args;switch(P){case OPS.setFont:ab=E(X[0].name).translated;F.fontSize=X[1];break;case OPS.setTextRise:F.textRise=X[0];break;case OPS.setHScale:F.textHScale=X[0]/100;break;case OPS.setLeading:F.leading=X[0];break;case OPS.moveText:F.translateTextMatrix(X[0],X[1]);break;case OPS.setLeadingMoveText:F.leading=-X[1];F.translateTextMatrix(X[0],X[1]);break;case OPS.nextLine:F.translateTextMatrix(0,-F.leading);break;case OPS.setTextMatrix:F.setTextMatrix(X[0],X[1],X[2],X[3],X[4],X[5]);break;case OPS.setCharSpacing:y=X[0];break;case OPS.setWordSpacing:af=X[0];break;case OPS.beginText:F.initialiseTextObj();break;case OPS.showSpacedText:var M=X[0];for(var Y=0,I=M.length;Y<I;Y++){if(typeof M[Y]==="string"){J.push(fontCharsToUnicode(M[Y],ab))}else{if(M[Y]<0&&ab.spaceWidth>0){var N=-M[Y]/ab.spaceWidth;if(N>V){N=Math.round(N);while(N--){J.push(" ")}}else{if(N>W){J.push(" ")}}}}}break;case OPS.showText:J.push(fontCharsToUnicode(X[0],ab));break;case OPS.nextLineShowText:J.push(fontCharsToUnicode(X[0],ab));break;case OPS.nextLineSetSpacingShowText:J.push(fontCharsToUnicode(X[2],ab));break;case OPS.paintXObject:J.length=0;if(X[0].code){break}if(!Q){Q=(C.get("XObject")||new Dict())}var H=X[0].name;if(O.key===H){if(O.texts){Util.concatenateToArray(ad,O.texts)}break}var K=Q.get(H);if(!K){break}assertWellFormed(isStream(K),"XObject should be a stream");var ag=K.dict.get("Subtype");assertWellFormed(isName(ag),"XObject should have a Name subtype");if("Form"!==ag.name){O.key=H;O.texts=null;break}var A=this.getTextContent(K,(K.dict.get("Resources")||C),F);O.key=H;O.texts=A;Util.concatenateToArray(ad,A);break;case OPS.setGState:var R=X[0];var z=C.get("ExtGState");if(!isDict(z)||!z.has(R.name)){break}var L=z.get(R.name);for(var Z=0;Z<L.length;Z++){if(L[Z]==="Font"){ab=E(X[0].name).translated}}break}if(J.length>0){var w=J.join("");var D=PDFJS.bidi(w,-1,ab.vertical);var U=F.calcRenderParams(ae.ctm);var aa=F.fontSize*U.vScale;var G=(ab.ascent?(ab.ascent*aa):(ab.descent?((1+ab.descent)*aa):aa));D.x=U.renderMatrix[4]-(G*Math.sin(U.angle));D.y=U.renderMatrix[5]+(G*Math.cos(U.angle));if(D.dir=="ttb"){D.x+=U.vScale/2;D.y-=U.vScale}D.angle=U.angle;D.size=aa;ad.push(D);J.length=0}}return ad},extractDataStructures:function v(A,z,J,I){var y=(A.get("ToUnicode")||z.get("ToUnicode"));if(y){I.toUnicode=this.readToUnicode(y,J,I)}if(I.composite){var F=A.get("CIDSystemInfo");if(isDict(F)){I.cidSystemInfo={registry:F.get("Registry"),ordering:F.get("Ordering"),supplement:F.get("Supplement")}}var B=A.get("CIDToGIDMap");if(isStream(B)){I.cidToGidMap=this.readCidToGidMap(B)}}var C=[];var x=null;if(A.has("Encoding")){var w=A.get("Encoding");if(isDict(w)){x=w.get("BaseEncoding");x=(isName(x)?x.name:null);if(w.has("Differences")){var K=w.get("Differences");var H=0;for(var D=0,G=K.length;D<G;D++){var E=K[D];if(isNum(E)){H=E}else{C[H++]=E.name}}}}else{if(isName(w)){x=w.name}else{error("Encoding is not a Name nor a Dict")}}if((x!=="MacRomanEncoding"&&x!=="MacExpertEncoding"&&x!=="WinAnsiEncoding")){x=null}}if(x){I.defaultEncoding=Encodings[x].slice()}else{var w=(I.type==="TrueType"?Encodings.WinAnsiEncoding:Encodings.StandardEncoding);if(!!(I.flags&FontFlags.Symbolic)){w=(!I.file&&/Symbol/i.test(I.name)?Encodings.SymbolSetEncoding:Encodings.MacRomanEncoding)}I.defaultEncoding=w}I.differences=C;I.baseEncodingName=x;I.dict=A},readToUnicode:function q(z){var x=z;var w=[];if(isName(x)){return CMapFactory.create(x).map}else{if(isStream(x)){var y=CMapFactory.create(x).map;y.forEach(function(E,D){var F=[];for(var C=0;C<E.length;C+=2){var B=(E.charCodeAt(C)<<8)|E.charCodeAt(C+1);if((B&63488)!==55296){F.push(B);continue}C+=2;var A=(E.charCodeAt(C)<<8)|E.charCodeAt(C+1);F.push(((B&1023)<<10)+(A&1023)+65536)}y[D]=String.fromCharCode.apply(String,F)});return y}}return null},readCidToGidMap:function a(z){var y=z.getBytes();var w=[];for(var x=0,C=y.length;x<C;x++){var B=(y[x++]<<8)|y[x];if(B===0){continue}var A=x>>1;w[A]=B}return w},extractWidths:function e(A,y,J,C){var z=[];var N=0;var x=[];var U;if(C.composite){N=A.get("DW")||1000;var F=A.get("W");if(F){for(var Q=0,H=F.length;Q<H;Q++){var B=F[Q++];var w=y.fetchIfRef(F[Q]);if(isArray(w)){for(var P=0,S=w.length;P<S;P++){z[B++]=w[P]}}else{var M=F[++Q];for(var P=B;P<=w;P++){z[P]=M}}}}if(C.vertical){var L=(A.get("DW2")||[880,-1000]);U=[L[1],N*0.5,L[0]];L=A.get("W2");if(L){for(var Q=0,H=L.length;Q<H;Q++){var B=L[Q++];var w=y.fetchIfRef(L[Q]);if(isArray(w)){for(var P=0,S=w.length;P<S;P++){x[B++]=[w[P++],w[P++],w[P]]}}else{var I=[L[++Q],L[++Q],L[++Q]];for(var P=B;P<=w;P++){x[P]=I}}}}}}else{var T=C.firstChar;var F=A.get("Widths");if(F){var P=T;for(var Q=0,H=F.length;Q<H;Q++){z[P++]=F[Q]}N=(parseFloat(J.get("MissingWidth"))||0)}else{var R=A.get("BaseFont");if(isName(R)){var O=this.getBaseFontMetrics(R.name);z=this.buildCharCodeToWidth(O.widths,C);N=O.defaultWidth}}}var K=true;var E=N;for(var G in z){var D=z[G];if(!D){continue}if(!E){E=D;continue}if(E!=D){K=false;break}}if(K){C.flags|=FontFlags.FixedPitch}C.defaultWidth=N;C.widths=z;C.defaultVMetrics=U;C.vmetrics=x},isSerifFont:function t(x){var w=x.split("-")[0];return(w in serifFonts)||(w.search(/serif/gi)!==-1)},getBaseFontMetrics:function i(x){var B=0;var A=[];var z=false;var y=(stdFontMap[x]||x);if(!(y in Metrics)){if(this.isSerifFont(x)){y="Times-Roman"}else{y="Helvetica"}}var w=Metrics[y];if(isNum(w)){B=w;z=true}else{A=w}return{defaultWidth:B,monospace:z,widths:A}},buildCharCodeToWidth:function n(A,x){var z=Object.create(null);var B=x.differences;var y=x.defaultEncoding;for(var w=0;w<256;w++){if(w in B&&A[B[w]]){z[w]=A[B[w]];continue}if(w in y&&A[y[w]]){z[w]=A[y[w]];continue}}return z},translateFont:function o(z,x){var F=z;var y=z.get("Subtype");assertWellFormed(isName(y),"invalid font Subtype");var L=false;if(y.name=="Type0"){var O=z.get("DescendantFonts");if(!O){error("Descendant fonts are not specified")}z=(isArray(O)?x.fetchIfRef(O[0]):O);y=z.get("Subtype");assertWellFormed(isName(y),"invalid font Subtype");L=true}var T=(L?65535:255);var E=z.get("FontDescriptor");if(!E){if(y.name=="Type3"){E=new Dict();E.set("FontName",Name.get(y.name))}else{var N=z.get("BaseFont");if(!isName(N)){error("Base font is not specified")}N=N.name.replace(/[,_]/g,"-");var K=this.getBaseFontMetrics(N);var R=N.split("-")[0];var A=(this.isSerifFont(R)?FontFlags.Serif:0)|(K.monospace?FontFlags.FixedPitch:0)|(symbolsFonts[R]?FontFlags.Symbolic:FontFlags.Nonsymbolic);var B={type:y.name,name:N,widths:K.widths,defaultWidth:K.defaultWidth,flags:A,firstChar:0,lastChar:T};this.extractDataStructures(z,z,x,B);B.widths=this.buildCharCodeToWidth(K.widths,B);return new Font(N,null,B)}}var P=(z.get("FirstChar")||0);var D=(z.get("LastChar")||T);var G=E.get("FontName");var Q=z.get("BaseFont");if(isString(G)){G=Name.get(G)}if(isString(Q)){Q=Name.get(Q)}if(y.name!=="Type3"){var S=G&&G.name;var w=Q&&Q.name;if(S!==w){info("The FontDescriptor's FontName is \""+S+'" but should be the same as the Font\'s BaseFont "'+w+'"')}}G=(G||Q);assertWellFormed(isName(G),"invalid font name");var C=E.get("FontFile","FontFile2","FontFile3");if(C){if(C.dict){var J=C.dict.get("Subtype");if(J){J=J.name}var I=C.dict.get("Length1");var H=C.dict.get("Length2")}}var B={type:y.name,name:G.name,subtype:J,file:C,length1:I,length2:H,loadedName:F.loadedName,composite:L,wideChars:L,fixedPitch:false,fontMatrix:(z.get("FontMatrix")||FONT_IDENTITY_MATRIX),firstChar:P||0,lastChar:(D||T),bbox:E.get("FontBBox"),ascent:E.get("Ascent"),descent:E.get("Descent"),xHeight:E.get("XHeight"),capHeight:E.get("CapHeight"),flags:E.get("Flags"),italicAngle:E.get("ItalicAngle"),coded:false};if(L){var M=F.get("Encoding");if(isName(M)){B.cidEncoding=M.name}B.cMap=CMapFactory.create(M,{url:PDFJS.cMapUrl,packed:PDFJS.cMapPacked},null);B.vertical=B.cMap.vertical}this.extractDataStructures(z,F,x,B);this.extractWidths(z,x,E,B);if(y.name==="Type3"){B.coded=true}return new Font(G.name,C,B)}};return c})();var OperatorList=(function OperatorListClosure(){var d=1000;var c=d-5;function b(f){var h=[];var l=f.fnArray,k=f.argsArray;for(var g=0,j=f.length;g<j;g++){switch(l[g]){case OPS.paintInlineImageXObject:case OPS.paintInlineImageXObjectGroup:case OPS.paintImageMaskXObject:var e=k[g][0];if(!e.cached){h.push(e.data.buffer)}break}}return h}function a(g,f,e){this.messageHandler=f;this.fnArray=[];this.argsArray=[];this.dependencies={};this.pageIndex=e;this.intent=g}a.prototype={get lengthfunction(){return this.argsArray.length},addOp:function(f,e){this.fnArray.push(f);this.argsArray.push(e);if(this.messageHandler){if(this.fnArray.length>=d){this.flush()}else{if(this.fnArray.length>=c&&(f===OPS.restore||f===OPS.endText)){this.flush()}}}},addDependency:function(e){if(e in this.dependencies){return}this.dependencies[e]=true;this.addOp(OPS.dependency,[e])},addDependencies:function(f){for(var e in f){this.addDependency(e)}},addOpList:function(g){Util.extendObj(this.dependencies,g.dependencies);for(var e=0,f=g.length;e<f;e++){this.addOp(g.fnArray[e],g.argsArray[e])}},getIR:function(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}},flush:function(f){new QueueOptimizer().optimize(this);var e=b(this);this.messageHandler.send("RenderPageChunk",{operatorList:{fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:f,length:this.length},pageIndex:this.pageIndex,intent:this.intent},null,e);this.dependencies={};this.fnArray.length=0;this.argsArray.length=0}};return a})();var TextState=(function TextStateClosure(){function b(){this.fontSize=0;this.textMatrix=[1,0,0,1,0,0];this.stateStack=[];this.leading=0;this.textHScale=1;this.textRise=0}b.prototype={initialiseTextObj:function d(){var f=this.textMatrix;f[0]=1;f[1]=0;f[2]=0;f[3]=1;f[4]=0;f[5]=0},setTextMatrix:function a(i,h,n,l,k,j){var g=this.textMatrix;g[0]=i;g[1]=h;g[2]=n;g[3]=l;g[4]=k;g[5]=j},translateTextMatrix:function c(g,h){var f=this.textMatrix;f[4]=f[0]*g+f[2]*h+f[4];f[5]=f[1]*g+f[3]*h+f[5]},calcRenderParams:function e(n){var q=this.textMatrix;var l=this.fontSize;var j=l*this.textHScale;var i=this.textRise;var f=Math.sqrt((q[2]*q[2])+(q[3]*q[3]));var g=Math.atan2(q[1],q[0]);var s=q[0]*n[0]+q[1]*n[2];var r=q[0]*n[1]+q[1]*n[3];var p=q[2]*n[0]+q[3]*n[2];var o=q[2]*n[1]+q[3]*n[3];var m=q[4]*n[0]+q[5]*n[2]+n[4];var k=q[4]*n[1]+q[5]*n[3]+n[5];var h=[j*s,j*r,l*p,l*o,i*p+m,i*o+k];return{renderMatrix:h,vScale:f,angle:g}},};return b})();var EvalState=(function EvalStateClosure(){function a(){this.font=null;this.textRenderingMode=TextRenderingMode.FILL}a.prototype={clone:function b(){return Object.create(this)},};return a})();var EvaluatorPreprocessor=(function EvaluatorPreprocessor(){var a={w:{id:OPS.setLineWidth,numArgs:1,variableArgs:false},J:{id:OPS.setLineCap,numArgs:1,variableArgs:false},j:{id:OPS.setLineJoin,numArgs:1,variableArgs:false},M:{id:OPS.setMiterLimit,numArgs:1,variableArgs:false},d:{id:OPS.setDash,numArgs:2,variableArgs:false},ri:{id:OPS.setRenderingIntent,numArgs:1,variableArgs:false},i:{id:OPS.setFlatness,numArgs:1,variableArgs:false},gs:{id:OPS.setGState,numArgs:1,variableArgs:false},q:{id:OPS.save,numArgs:0,variableArgs:false},Q:{id:OPS.restore,numArgs:0,variableArgs:false},cm:{id:OPS.transform,numArgs:6,variableArgs:false},m:{id:OPS.moveTo,numArgs:2,variableArgs:false},l:{id:OPS.lineTo,numArgs:2,variableArgs:false},c:{id:OPS.curveTo,numArgs:6,variableArgs:false},v:{id:OPS.curveTo2,numArgs:4,variableArgs:false},y:{id:OPS.curveTo3,numArgs:4,variableArgs:false},h:{id:OPS.closePath,numArgs:0,variableArgs:false},re:{id:OPS.rectangle,numArgs:4,variableArgs:false},S:{id:OPS.stroke,numArgs:0,variableArgs:false},s:{id:OPS.closeStroke,numArgs:0,variableArgs:false},f:{id:OPS.fill,numArgs:0,variableArgs:false},F:{id:OPS.fill,numArgs:0,variableArgs:false},"f*":{id:OPS.eoFill,numArgs:0,variableArgs:false},B:{id:OPS.fillStroke,numArgs:0,variableArgs:false},"B*":{id:OPS.eoFillStroke,numArgs:0,variableArgs:false},b:{id:OPS.closeFillStroke,numArgs:0,variableArgs:false},"b*":{id:OPS.closeEOFillStroke,numArgs:0,variableArgs:false},n:{id:OPS.endPath,numArgs:0,variableArgs:false},W:{id:OPS.clip,numArgs:0,variableArgs:false},"W*":{id:OPS.eoClip,numArgs:0,variableArgs:false},BT:{id:OPS.beginText,numArgs:0,variableArgs:false},ET:{id:OPS.endText,numArgs:0,variableArgs:false},Tc:{id:OPS.setCharSpacing,numArgs:1,variableArgs:false},Tw:{id:OPS.setWordSpacing,numArgs:1,variableArgs:false},Tz:{id:OPS.setHScale,numArgs:1,variableArgs:false},TL:{id:OPS.setLeading,numArgs:1,variableArgs:false},Tf:{id:OPS.setFont,numArgs:2,variableArgs:false},Tr:{id:OPS.setTextRenderingMode,numArgs:1,variableArgs:false},Ts:{id:OPS.setTextRise,numArgs:1,variableArgs:false},Td:{id:OPS.moveText,numArgs:2,variableArgs:false},TD:{id:OPS.setLeadingMoveText,numArgs:2,variableArgs:false},Tm:{id:OPS.setTextMatrix,numArgs:6,variableArgs:false},"T*":{id:OPS.nextLine,numArgs:0,variableArgs:false},Tj:{id:OPS.showText,numArgs:1,variableArgs:false},TJ:{id:OPS.showSpacedText,numArgs:1,variableArgs:false},"'":{id:OPS.nextLineShowText,numArgs:1,variableArgs:false},'"':{id:OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:false},d0:{id:OPS.setCharWidth,numArgs:2,variableArgs:false},d1:{id:OPS.setCharWidthAndBounds,numArgs:6,variableArgs:false},CS:{id:OPS.setStrokeColorSpace,numArgs:1,variableArgs:false},cs:{id:OPS.setFillColorSpace,numArgs:1,variableArgs:false},SC:{id:OPS.setStrokeColor,numArgs:4,variableArgs:true},SCN:{id:OPS.setStrokeColorN,numArgs:33,variableArgs:true},sc:{id:OPS.setFillColor,numArgs:4,variableArgs:true},scn:{id:OPS.setFillColorN,numArgs:33,variableArgs:true},G:{id:OPS.setStrokeGray,numArgs:1,variableArgs:false},g:{id:OPS.setFillGray,numArgs:1,variableArgs:false},RG:{id:OPS.setStrokeRGBColor,numArgs:3,variableArgs:false},rg:{id:OPS.setFillRGBColor,numArgs:3,variableArgs:false},K:{id:OPS.setStrokeCMYKColor,numArgs:4,variableArgs:false},k:{id:OPS.setFillCMYKColor,numArgs:4,variableArgs:false},sh:{id:OPS.shadingFill,numArgs:1,variableArgs:false},BI:{id:OPS.beginInlineImage,numArgs:0,variableArgs:false},ID:{id:OPS.beginImageData,numArgs:0,variableArgs:false},EI:{id:OPS.endInlineImage,numArgs:1,variableArgs:false},Do:{id:OPS.paintXObject,numArgs:1,variableArgs:false},MP:{id:OPS.markPoint,numArgs:1,variableArgs:false},DP:{id:OPS.markPointProps,numArgs:2,variableArgs:false},BMC:{id:OPS.beginMarkedContent,numArgs:1,variableArgs:false},BDC:{id:OPS.beginMarkedContentProps,numArgs:2,variableArgs:false},EMC:{id:OPS.endMarkedContent,numArgs:0,variableArgs:false},BX:{id:OPS.beginCompat,numArgs:0,variableArgs:false},EX:{id:OPS.endCompat,numArgs:0,variableArgs:false},BM:null,BD:null,"true":null,fa:null,fal:null,fals:null,"false":null,nu:null,nul:null,"null":null};function d(h,g){this.parser=new Parser(new Lexer(h,a),false,g);this.ctm=new Float32Array([1,0,0,1,0,0]);this.savedStates=[]}d.prototype={get savedStatesDepthfunction(){return this.savedStates.length},read:function f(){var h=[];while(true){var k=this.parser.getObj();if(isEOF(k)){return null}if(!isCmd(k)){if(k!==null&&k!==undefined){h.push((k instanceof Dict?k.getAll():k));assertWellFormed(h.length<=33,"Too many arguments")}continue}var j=k.cmd;var g=a[j];if(!g){warn('Unknown command "'+j+'"');continue}var i=g.id;if(g.variableArgs){if(h.length>g.numArgs){info("Command "+i+": expected [0,"+g.numArgs+"] args, but received "+h.length+" args")}}else{if(h.length<g.numArgs){info("Command "+i+": because expected "+g.numArgs+" args, but received "+h.length+" args; skipping");h=[];continue}else{if(h.length>g.numArgs){info("Command "+i+": expected "+g.numArgs+" args, but received "+h.length+" args")}}}this.preprocessCommand(i,h);return{fn:i,args:h}}},getState:function c(){return{ctm:this.ctm}},setState:function e(g){this.ctm=g.ctm},preprocessCommand:function b(k,j){switch(k|0){case OPS.save:this.savedStates.push(this.getState());break;case OPS.restore:var i=this.savedStates.pop();if(i){this.setState(i)}break;case OPS.transform:var h=this.ctm;var g=new Float32Array(6);g[0]=h[0]*j[0]+h[2]*j[1];g[1]=h[1]*j[0]+h[3]*j[1];g[2]=h[0]*j[2]+h[2]*j[3];g[3]=h[1]*j[2]+h[3]*j[3];g[4]=h[0]*j[4]+h[2]*j[5]+h[4];g[5]=h[1]*j[4]+h[3]*j[5]+h[5];this.ctm=g;break}}};return d})();var QueueOptimizer=(function QueueOptimizerClosure(){function e(o,n,k){var m=o;for(var h=0,j=n.length-1;h<j;h++){var l=n[h];m=(m[l]||(m[l]=[]))}m[n[n.length-1]]=k}function d(j,m,o,n){for(var l=0;l<m;l++){var h=n[j+4*l+2];var k=h.length==1&&h[0];if(k&&k.width==1&&k.height==1&&(!k.data.length||(k.data.length==1&&k.data[0]===0))){o[j+4*l+2]=OPS.paintSolidColorImageMask;continue}break}return m-l}var a=[];e(a,[OPS.save,OPS.transform,OPS.paintInlineImageXObject,OPS.restore],function b(m){var G=10;var B=200;var A=1000;var w=1;var y=m.fnArray,l=m.argsArray;var F=m.currentOperation-3,H=F+4;var v=y.length;for(;H<v&&y[H-4]===y[H];H++){}var p=Math.min((H-F)>>2,B);if(p<G){m.currentOperation=H-1;return}var K=0;var L=[],x=0;var E=w,C=w;for(var z=0;z<p;z++){var u=l[F+(z<<2)+1];var N=l[F+(z<<2)+2][0];if(E+N.width>A){K=Math.max(K,E);C+=x+2*w;E=0;x=0}L.push({transform:u,x:E,y:C,w:N.width,h:N.height});E+=N.width+2*w;x=Math.max(x,N.height)}var s=Math.max(K,E)+w;var I=C+x+w;var J=new Uint8Array(s*I*4);var r=s<<2;for(var z=0;z<p;z++){var M=l[F+(z<<2)+2][0].data;var h=L[z].w<<2;var t=0;var o=(L[z].x+L[z].y*s)<<2;J.set(M.subarray(0,h),o-r);for(var D=0,n=L[z].h;D<n;D++){J.set(M.subarray(t,t+h),o);t+=h;o+=r}J.set(M.subarray(t-h,t),o);while(o>=0){M[o-4]=M[o];M[o-3]=M[o+1];M[o-2]=M[o+2];M[o-1]=M[o+3];M[o+h]=M[o+h-4];M[o+h+1]=M[o+h-3];M[o+h+2]=M[o+h-2];M[o+h+3]=M[o+h-1];o-=r}}y.splice(F,p*4,OPS.paintInlineImageXObjectGroup);l.splice(F,p*4,[{width:s,height:I,kind:ImageKind.RGBA_32BPP,data:J},L]);m.currentOperation=F});e(a,[OPS.save,OPS.transform,OPS.paintImageMaskXObject,OPS.restore],function c(k){var n=10;var z=100;var m=1000;var t=k.fnArray,l=k.argsArray;var r=k.currentOperation-3,u=r+4;var A=t.length;for(;u<A&&t[u-4]===t[u];u++){}var v=(u-r)>>2;v=d(r,v,t,l);if(v<n){k.currentOperation=u-1;return}var p=false;if(l[r+1][1]===0&&l[r+1][2]===0){u=r+4;p=true;for(var h=1;h<v;h++,u+=4){var w=l[u-3];var o=l[u+1];if(l[u-2][0]!==l[u+2][0]||w[0]!==o[0]||w[1]!==o[1]||w[2]!==o[2]||w[3]!==o[3]){if(h<n){p=false}else{v=h}break}}}if(p){v=Math.min(v,m);var s=new Float32Array(v*2);u=r+1;for(var h=0;h<v;h++){var o=l[u];s[(h<<1)]=o[4];s[(h<<1)+1]=o[5];u+=4}t.splice(r,v*4,OPS.paintImageMaskXObjectRepeat);l.splice(r,v*4,[l[r+2][0],l[r+1][0],l[r+1][3],s]);k.currentOperation=r}else{v=Math.min(v,z);var x=[];for(var h=0;h<v;h++){var o=l[r+(h<<2)+1];var y=l[r+(h<<2)+2][0];x.push({data:y.data,width:y.width,height:y.height,transform:o})}t.splice(r,v*4,OPS.paintImageMaskXObjectGroup);l.splice(r,v*4,[x]);k.currentOperation=r}});e(a,[OPS.save,OPS.transform,OPS.paintImageXObject,OPS.restore],function(l){var w=3;var k=1000;var r=l.fnArray,m=l.argsArray;var o=l.currentOperation-3,s=o+4;if(m[o+1][1]!==0||m[o+1][2]!==0){return}var x=r.length;for(;s+3<x&&r[s-4]===r[s];s+=4){if(r[s-3]!==r[s+1]||r[s-2]!==r[s+2]||r[s-1]!==r[s+3]){break}if(m[s-2][0]!==m[s+2][0]){break}var v=m[s-3];var n=m[s+1];if(v[0]!==n[0]||v[1]!==n[1]||v[2]!==n[2]||v[3]!==n[3]){break}}var t=Math.min((s-o)>>2,k);if(t<w){l.currentOperation=s-1;return}var p=new Float32Array(t*2);s=o+1;for(var h=0;h<t;h++){var n=m[s];p[(h<<1)]=n[4];p[(h<<1)+1]=n[5];s+=4}var u=[m[o+2][0],m[o+1][0],m[o+1][3],p];r.splice(o,t*4,OPS.paintImageXObjectRepeat);m.splice(o,t*4,u);l.currentOperation=o});e(a,[OPS.beginText,OPS.setFont,OPS.setTextMatrix,OPS.showText,OPS.endText],function(l){var v=3;var n=1000;var r=l.fnArray,m=l.argsArray;var p=l.currentOperation-4,s=p+5;var w=r.length;for(;s<w&&r[s-5]===r[s];s++){if(r[s]===OPS.setFont){if(m[s-5][0]!==m[s][0]||m[s-5][1]!==m[s][1]){break}}}var u=Math.min(((s-p)/5)|0,n);if(u<v){l.currentOperation=s-1;return}if(p>=4&&r[p-4]===r[p+1]&&r[p-3]===r[p+2]&&r[p-2]===r[p+3]&&r[p-1]===r[p+4]&&m[p-4][0]===m[p+1][0]&&m[p-4][1]===m[p+1][1]){u++;p-=5}var o=p+7;s=p+4;for(var h=1;h<u;h++){r[s]=r[o];m[s]=m[o];r[s+1]=r[o+1];m[s+1]=m[o+1];s+=2;o+=5}var t=(u-1)*3;r.splice(s,t);m.splice(s,t);l.currentOperation=s});function f(){}f.prototype={optimize:function g(h){var o=h.fnArray,n=h.argsArray;var k={currentOperation:0,fnArray:o,argsArray:n};var j,l=n.length;var m;for(j=0;j<l;j++){m=(m||a)[o[j]];if(typeof m==="function"){k.currentOperation=j;m=m(k);j=k.currentOperation;l=k.fnArray.length}}}};return f})();