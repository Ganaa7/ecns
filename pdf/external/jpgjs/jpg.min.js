var JpegImage=(function jpegImage(){var g=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);var f=4017;var o=799;var d=3406;var n=2276;var b=1567;var l=3784;var j=5793;var e=2896;function s(){}function i(C,D){var z=0,x=[],B,A,y=16;while(y>0&&!C[y-1]){y--}x.push({children:[],index:0});var w=x[0],v;for(B=0;B<y;B++){for(A=0;A<C[B];A++){w=x.pop();w.children[w.index]=D[z];while(w.index>0){w=x.pop()}w.index++;x.push(w);while(x.length<=B){x.push(v={children:[],index:0});w.children[w.index]=v.children;w=v}z++}if(B+1<y){x.push(v={children:[],index:0});w.children[w.index]=v.children;w=v}}return x[0].children}function q(w,x,v){return 64*((w.blocksPerLine+1)*x+v)}function c(an,Z,x,S,T,G,K,P,ae){var al=x.precision;var H=x.samplesPerLine;var F=x.scanLines;var J=x.mcusPerLine;var N=x.progressive;var U=x.maxH,R=x.maxV;var B=Z,D=0,I=0;function ab(){if(I>0){I--;return(D>>I)&1}D=an[Z++];if(D==255){var v=an[Z++];if(v){throw"unexpected marker: "+((D<<8)|v).toString(16)}}I=7;return D>>>7}function O(v){var ap=v;var aq;while((aq=ab())!==null){ap=ap[aq];if(typeof ap==="number"){return ap}if(typeof ap!=="object"){throw"invalid huffman sequence"}}return null}function y(v){var aq=0;while(v>0){var ap=ab();if(ap===null){return}aq=(aq<<1)|ap;v--}return aq}function X(v){var ap=y(v);if(ap>=1<<(v-1)){return ap}return ap+(-1<<v)+1}function W(au,ar){var aw=O(au.huffmanTableDC);var av=aw===0?0:X(aw);au.blockData[ar]=(au.pred+=av);var ap=1;while(ap<64){var aq=O(au.huffmanTableAC);var ax=aq&15,v=aq>>4;if(ax===0){if(v<15){break}ap+=16;continue}ap+=v;var at=g[ap];au.blockData[ar+at]=X(ax);ap++}}function z(v,ar){var ap=O(v.huffmanTableDC);var aq=ap===0?0:(X(ap)<<ae);v.blockData[ar]=(v.pred+=aq)}function L(v,ap){v.blockData[ap]|=ab()<<ae}var Q=0;function w(aq,aw){if(Q>0){Q--;return}var ap=G,au=K;while(ap<=au){var v=O(aq.huffmanTableAC);var ar=v&15,at=v>>4;if(ar===0){if(at<15){Q=y(at)+(1<<at)-1;break}ap+=16;continue}ap+=at;var av=g[ap];aq.blockData[aw+av]=X(ar)*(1<<ae);ap++}}var M=0,C;function V(aq,aw){var ap=G,au=K,at=0;while(ap<=au){var av=g[ap];switch(M){case 0:var v=O(aq.huffmanTableAC);var ar=v&15,at=v>>4;if(ar===0){if(at<15){Q=y(at)+(1<<at);M=4}else{at=16;M=1}}else{if(ar!==1){throw"invalid ACn encoding"}C=X(ar);M=at?2:3}continue;case 1:case 2:if(aq.blockData[aw+av]){aq.blockData[aw+av]+=(ab()<<ae)}else{at--;if(at===0){M=M==2?3:0}}break;case 3:if(aq.blockData[aw+av]){aq.blockData[aw+av]+=(ab()<<ae)}else{aq.blockData[aw+av]=C<<ae;M=0}break;case 4:if(aq.blockData[aw+av]){aq.blockData[aw+av]+=(ab()<<ae)}break}ap++}if(M===4){Q--;if(Q===0){M=0}}}function Y(ax,v,ap,ay,aq){var ar=(ap/J)|0;var av=ap%J;var au=ar*ax.v+ay;var aw=av*ax.h+aq;var at=q(ax,au,aw);v(ax,at)}function ag(ap,at,aq){var ar=(aq/ap.blocksPerLine)|0;var v=aq%ap.blocksPerLine;var au=q(ap,ar,v);at(ap,au)}var am=S.length;var ak,ai,ah,af,ad;var E;if(N){if(G===0){E=P===0?z:L}else{E=P===0?w:V}}else{E=W}var ac=0,ao;var A;if(am==1){A=S[0].blocksPerLine*S[0].blocksPerColumn}else{A=J*x.mcusPerColumn}if(!T){T=A}var aj,aa;while(ac<A){for(ai=0;ai<am;ai++){S[ai].pred=0}Q=0;if(am==1){ak=S[0];for(ad=0;ad<T;ad++){ag(ak,E,ac);ac++}}else{for(ad=0;ad<T;ad++){for(ai=0;ai<am;ai++){ak=S[ai];aj=ak.h;aa=ak.v;for(ah=0;ah<aa;ah++){for(af=0;af<aj;af++){Y(ak,E,ac,ah,af)}}}ac++}}I=0;ao=(an[Z]<<8)|an[Z+1];if(ao<=65280){throw"marker was not found"}if(ao>=65488&&ao<=65495){Z+=2}else{break}}return Z-B}function r(F,I,v){var C=F.quantizationTable;var J,H,G,E,D,B,A,z,K;var x;for(x=0;x<64;x++){v[x]=F.blockData[I+x]*C[x]}for(x=0;x<8;++x){var L=8*x;if(v[1+L]==0&&v[2+L]==0&&v[3+L]==0&&v[4+L]==0&&v[5+L]==0&&v[6+L]==0&&v[7+L]==0){K=(j*v[0+L]+512)>>10;v[0+L]=K;v[1+L]=K;v[2+L]=K;v[3+L]=K;v[4+L]=K;v[5+L]=K;v[6+L]=K;v[7+L]=K;continue}J=(j*v[0+L]+128)>>8;H=(j*v[4+L]+128)>>8;G=v[2+L];E=v[6+L];D=(e*(v[1+L]-v[7+L])+128)>>8;z=(e*(v[1+L]+v[7+L])+128)>>8;B=v[3+L]<<4;A=v[5+L]<<4;K=(J-H+1)>>1;J=(J+H+1)>>1;H=K;K=(G*l+E*b+128)>>8;G=(G*b-E*l+128)>>8;E=K;K=(D-A+1)>>1;D=(D+A+1)>>1;A=K;K=(z+B+1)>>1;B=(z-B+1)>>1;z=K;K=(J-E+1)>>1;J=(J+E+1)>>1;E=K;K=(H-G+1)>>1;H=(H+G+1)>>1;G=K;K=(D*n+z*d+2048)>>12;D=(D*d-z*n+2048)>>12;z=K;K=(B*o+A*f+2048)>>12;B=(B*f-A*o+2048)>>12;A=K;v[0+L]=J+z;v[7+L]=J-z;v[1+L]=H+A;v[6+L]=H-A;v[2+L]=G+B;v[5+L]=G-B;v[3+L]=E+D;v[4+L]=E-D}for(x=0;x<8;++x){var w=x;if(v[1*8+w]==0&&v[2*8+w]==0&&v[3*8+w]==0&&v[4*8+w]==0&&v[5*8+w]==0&&v[6*8+w]==0&&v[7*8+w]==0){K=(j*v[x+0]+8192)>>14;v[0*8+w]=K;v[1*8+w]=K;v[2*8+w]=K;v[3*8+w]=K;v[4*8+w]=K;v[5*8+w]=K;v[6*8+w]=K;v[7*8+w]=K;continue}J=(j*v[0*8+w]+2048)>>12;H=(j*v[4*8+w]+2048)>>12;G=v[2*8+w];E=v[6*8+w];D=(e*(v[1*8+w]-v[7*8+w])+2048)>>12;z=(e*(v[1*8+w]+v[7*8+w])+2048)>>12;B=v[3*8+w];A=v[5*8+w];K=(J-H+1)>>1;J=(J+H+1)>>1;H=K;K=(G*l+E*b+2048)>>12;G=(G*b-E*l+2048)>>12;E=K;K=(D-A+1)>>1;D=(D+A+1)>>1;A=K;K=(z+B+1)>>1;B=(z-B+1)>>1;z=K;K=(J-E+1)>>1;J=(J+E+1)>>1;E=K;K=(H-G+1)>>1;H=(H+G+1)>>1;G=K;K=(D*n+z*d+2048)>>12;D=(D*d-z*n+2048)>>12;z=K;K=(B*o+A*f+2048)>>12;B=(B*f-A*o+2048)>>12;A=K;v[0*8+w]=J+z;v[7*8+w]=J-z;v[1*8+w]=H+A;v[6*8+w]=H-A;v[2*8+w]=G+B;v[5*8+w]=G-B;v[3*8+w]=E+D;v[4*8+w]=E-D}for(x=0;x<64;++x){var y=I+x;F.blockData[y]=t((v[x]+2056)>>4)}}function a(v,F){var H=[];var G=F.blocksPerLine;var B=F.blocksPerColumn;var w=G<<3;var C=new Int32Array(64);var z,y,E=0;for(var A=0;A<B;A++){for(var D=0;D<G;D++){var x=q(F,A,D);r(F,x,C)}}return F.blockData}function t(v){return v<=0?0:v>=255?255:v|0}function u(v){return v<=0?0:v>=255?255:v}s.prototype={load:function k(v){var w=new XMLHttpRequest();w.open("GET",v,true);w.responseType="arraybuffer";w.onload=(function(){var x=new Uint8Array(w.response||w.mozResponseArrayBuffer);this.parse(x);if(this.onload){this.onload()}}).bind(this);w.send(null)},parse:function p(ap){function ai(){var v=(ap[ae]<<8)|ap[ae+1];ae+=2;return v}function M(){var v=ai();var z=ap.subarray(ae,ae+v-2);ae+=z.length;return z}function aa(ar){var v=Math.ceil(ar.samplesPerLine/8/ar.maxH);var at=Math.ceil(ar.scanLines/8/ar.maxV);for(var au=0;au<ar.components.length;au++){ao=ar.components[au];var ay=Math.ceil(Math.ceil(ar.samplesPerLine/8)*ao.h/ar.maxH);var av=Math.ceil(Math.ceil(ar.scanLines/8)*ao.v/ar.maxV);var ax=v*ao.h;var z=at*ao.v;var aw=64*z*(ax+1);ao.blockData=new Int16Array(aw);ao.blocksPerLine=ay;ao.blocksPerColumn=av}ar.mcusPerLine=v;ar.mcusPerColumn=at}var ae=0,P=ap.length;var O=null;var Y=null;var F=null;var w,V;var Z=[];var A=[],C=[];var y=ai();if(y!=65496){throw"SOI not found"}y=ai();while(y!=65497){var am,al,ak;switch(y){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var H=M();if(y===65504){if(H[0]===74&&H[1]===70&&H[2]===73&&H[3]===70&&H[4]===0){O={version:{major:H[5],minor:H[6]},densityUnits:H[7],xDensity:(H[8]<<8)|H[9],yDensity:(H[10]<<8)|H[11],thumbWidth:H[12],thumbHeight:H[13],thumbData:H.subarray(14,14+3*H[12]*H[13])}}}if(y===65518){if(H[0]===65&&H[1]===100&&H[2]===111&&H[3]===98&&H[4]===101&&H[5]===0){Y={version:H[6],flags0:(H[7]<<8)|H[8],flags1:(H[9]<<8)|H[10],transformCode:H[11]}}}break;case 65499:var N=ai();var L=N+ae-2;while(ae<L){var B=ap[ae++];var G=new Int32Array(64);if((B>>4)===0){for(al=0;al<64;al++){var ac=g[al];G[ac]=ap[ae++]}}else{if((B>>4)===1){for(al=0;al<64;al++){var ac=g[al];G[ac]=ai()}}else{throw"DQT: invalid table spec"}}Z[B&15]=G}break;case 65472:case 65473:case 65474:if(w){throw"Only single frame JPEGs supported"}ai();w={};w.extended=(y===65473);w.progressive=(y===65474);w.precision=ap[ae++];w.scanLines=ai();w.samplesPerLine=ai();w.components=[];w.componentIds={};var R=ap[ae++],ad;var X=0,S=0;for(am=0;am<R;am++){ad=ap[ae];var an=ap[ae+1]>>4;var af=ap[ae+1]&15;if(X<an){X=an}if(S<af){S=af}var x=ap[ae+2];var ak=w.components.push({h:an,v:af,quantizationTable:Z[x]});w.componentIds[ad]=ak-1;ae+=3}w.maxH=X;w.maxV=S;aa(w);break;case 65476:var ah=ai();for(am=2;am<ah;){var D=ap[ae++];var ab=new Uint8Array(16);var W=0;for(al=0;al<16;al++,ae++){W+=(ab[al]=ap[ae])}var Q=new Uint8Array(W);for(al=0;al<W;al++,ae++){Q[al]=ap[ae]}am+=17+W;((D>>4)===0?C:A)[D&15]=i(ab,Q)}break;case 65501:ai();V=ai();break;case 65498:var ag=ai();var aj=ap[ae++];var U=[],ao;for(am=0;am<aj;am++){var aq=w.componentIds[ap[ae++]];ao=w.components[aq];var T=ap[ae++];ao.huffmanTableDC=C[T>>4];ao.huffmanTableAC=A[T&15];U.push(ao)}var E=ap[ae++];var J=ap[ae++];var I=ap[ae++];var K=c(ap,ae,w,U,V,E,J,I>>4,I&15);ae+=K;break;default:if(ap[ae-3]==255&&ap[ae-2]>=192&&ap[ae-2]<=254){ae-=3;break}throw"unknown JPEG marker "+y.toString(16)}y=ai()}this.width=w.samplesPerLine;this.height=w.scanLines;this.jfif=O;this.adobe=Y;this.components=[];for(var am=0;am<w.components.length;am++){var ao=w.components[am];this.components.push({output:a(w,ao),scaleX:ao.h/w.maxH,scaleY:ao.v/w.maxV,blocksPerLine:ao.blocksPerLine,blocksPerColumn:ao.blocksPerColumn})}},getData:function m(v,w){var af=this.width/v,ad=this.height/w;var ao,ae,ac;var ai,ah,am;var aj=0;var z,D,ar,I,S,H,an,E,L,U;var Q;var X=this.components.length;var O=v*w*X;var at=new Uint8Array(O);var T;var ab=new Uint8Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(am=0;am<X;am++){ao=this.components[am];var ag=ao.blocksPerLine;var au=ao.blocksPerColumn;var F=ag<<3;var al,ak,aa=0;var J=0;for(var A=0;A<au;A++){var P=A<<3;for(var aq=0;aq<ag;aq++){var ap=q(ao,A,aq);var aj=0,N=aq<<3;for(al=0;al<8;al++){var J=(P+al)*F;for(ak=0;ak<8;ak++){ab[J+N+ak]=ao.output[ap+aj++]}}}}ae=ao.scaleX*af;ac=ao.scaleY*ad;aj=am;var W,V;var Z;for(ah=0;ah<w;ah++){for(ai=0;ai<v;ai++){V=0|(ah*ac);W=0|(ai*ae);Z=V*F+W;at[aj]=ab[Z];aj+=X}}}switch(X){case 1:case 2:break;case 3:Q=true;if(this.adobe&&this.adobe.transformCode){Q=true}else{if(typeof this.colorTransform!=="undefined"){Q=!!this.colorTransform}}if(Q){for(am=0;am<O;am+=X){z=at[am];D=at[am+1];ar=at[am+2];E=u(z+1.402*(ar-128));L=u(z-0.3441363*(D-128)-0.71413636*(ar-128));U=u(z+1.772*(D-128));at[am]=E;at[am+1]=L;at[am+2]=U}}break;case 4:Q=false;if(this.adobe&&this.adobe.transformCode){Q=true}else{if(typeof this.colorTransform!=="undefined"){Q=!!this.colorTransform}}if(Q){for(am=0;am<O;am+=X){z=at[am];D=at[am+1];ar=at[am+2];S=255-u(z+1.402*(ar-128));H=255-u(z-0.3441363*(D-128)-0.71413636*(ar-128));an=255-u(z+1.772*(D-128));at[am]=S;at[am+1]=H;at[am+2]=an}}break;default:throw"Unsupported color mode"}return at},copyToImageData:function h(v){var z=v.width,O=v.height;var L=z*O*4;var H=v.data;var E=this.getData(z,O);var F=0,A=0;var y,J,w,I,D,N,x;switch(this.components.length){case 1:while(A<L){y=E[F++];H[A++]=y;H[A++]=y;H[A++]=y;H[A++]=255}break;case 3:while(A<L){D=E[F++];N=E[F++];x=E[F++];H[A++]=D;H[A++]=N;H[A++]=x;H[A++]=255}break;case 4:while(A<L){w=E[F++];I=E[F++];y=E[F++];J=E[F++];D=255-u(w*(1-J/255)+J);N=255-u(I*(1-J/255)+J);x=255-u(y*(1-J/255)+J);H[A++]=D;H[A++]=N;H[A++]=x;H[A++]=255}break;default:throw"Unsupported color mode"}}};return s})();