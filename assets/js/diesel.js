function fill_dialog(e){var t={pk_id:e};title="Банк цэнэглэсэн түлшний хэмжээ оруулах",$.ajax({type:"POST",url:base_url+"/diesel/index/page/"+e,data:t,dataType:"json",success:function(e){$("#id",fill).val(e.id),$("#location",fill).text(e.location),$("#main_equipment",fill).text(e.main_equipment),$("#equipment",fill).text(e.equipment),$("#power",fill).text(e.power),$("#consumption",fill).text(e.consumption),$("#bank",fill).text(e.bank),$("#capacity",fill).text(e.capacity),$("#bank_id",fill).val(e.bank_id)}}).done(function(){fill.dialog("option","title",title),fill.dialog({buttons:{"Хадгалах":function(){var t={pk_id:e};$('input[type="text"], input[type="hidden"], select, textarea',fill).each(function(){var e=$(this);t[e.attr("name")]=e.val()}),$.ajax({type:"POST",url:base_url+"/diesel/index/insert/",data:t,dataType:"json",success:function(e){"success"==e.status?(fill.dialog("close"),showMessage(e.message,"success"),reload()):$("p.feedback",fill).removeClass("success, notify").addClass("error").html(e.message).show()}})},"Хаах":function(){fill.dialog("close")}}}),fill.dialog("open")})}function fuel_dialog(e){var t={pk_id:e};title="Байгаа түлшний хэмжээ оруулах",$.ajax({type:"POST",url:base_url+"/diesel/index/page/"+e,data:t,dataType:"json",success:function(e){$("#id",fuel).val(e.id),$("#location",fuel).text(e.location),$("#main_equipment",fuel).text(e.main_equipment),$("#equipment",fuel).text(e.equipment),$("#power",fuel).text(e.power),$("#consumption",fuel).text(e.consumption),$("#bank",fuel).text(e.bank),$("#capacity",fuel).text(e.capacity),$("#bank_id",fuel).val(e.bank_id)}}).done(function(){fuel.dialog("option","title",title),fuel.dialog({buttons:{"Хадгалах":function(){var t={pk_id:e};$('input[type="text"], input[type="hidden"], select, textarea',fuel).each(function(){var e=$(this);t[e.attr("name")]=e.val()}),$.ajax({type:"POST",url:base_url+"/diesel/index/insert/",data:t,dataType:"json",success:function(e){"success"==e.status?(fuel.dialog("close"),showMessage(e.message,"success"),reload()):$("p.feedback",fuel).removeClass("success, notify").addClass("error").html(e.message).show()}})},"Хаах":function(){fuel.dialog("close")}}}),fuel.dialog("open")})}function reload(){$("#grid").jqGrid("setGridParam",{search:!1,postData:{filters:""}}).trigger("reloadGrid")}function showMessage(e,t){$("p#notification").length||$("#nav-bar").prepend('<p id="notification"></p>');var i=$("p#notification");i.hide(),i.removeClass(),i.addClass(t),i.html(e),i.fadeIn("fast",function(){i.delay(5e3).fadeOut()})}$(function(){fill=$("#fill"),fill.dialog({autoOpen:!1,width:550,resizable:!1,modal:!0,position:["center",100],close:function(){$('input[type="text"], input[type="hidden"], select, textarea',fill).val(""),$(this).dialog("close")}}),fuel=$("#fuel"),fuel.dialog({autoOpen:!1,width:550,resizable:!1,modal:!0,position:["center",100],close:function(){$('input[type="text"], input[type="hidden"], select, textarea',fuel).val(""),$(this).dialog("close")}});var e=function(e,t,i,a){var n,l=i.attr[a.name];return l.rowspan?n=' rowspan="'+l.rowspan+'"':l.display&&(n=' style="display:'+l.display+'"'),n};console.log("base_url"+base_url),$("#grid").jqGrid({url:base_url+"/diesel/index/grid",datatype:"json",mtype:"GET",colNames:["#","Байршил","Байгууламж","main_equipment_id","Дизель генератор","Чадал","Зарцуулалт","Банк/лтр/","bank_id","Нөөц ёнкость","Нийт багтаамж","Үлдэгдэл/түлш","Ажиллах цаг","Шинэчлэсэн/t","Шинэчлэсэн/ИТА"],colModel:[{name:"id",width:20,align:"center"},{name:"location",width:50,align:"center",cellattr:e},{name:"main_equipment",width:50,align:"center",cellattr:e},{name:"main_equipment_id",hidden:!0},{name:"equipment",width:40},{name:"power",index:"power",width:25,align:"left"},{name:"consumption",index:"consumption",width:32,align:"right"},{name:"bank",index:"bank",width:30,align:"right"},{name:"bank_id",hidden:!0},{name:"capacity",index:"capacity",width:35,align:"center",cellattr:e},{name:"total",index:"total",width:40,align:"center",cellattr:e},{name:"fuel",index:"fuel",width:40,align:"center",cellattr:e,formatter:function(e,t){return"add"==$("#action").val()?"<a href='#' class='fuel_edit_fn' onclick='fuel_dialog("+t.rowId+")' >"+e+"</a>":e}},{name:"workhour",index:"workhour",width:35,align:"center",cellattr:e},{name:"uptime",index:"uptime",width:45,align:"center",cellattr:e},{name:"checkedby",index:"checkedby",width:40,align:"center",cellattr:e}],jsonReader:{page:"page",total:"total",records:"records",root:"rows",repeatitems:!1,id:"id"},cmTemplate:{sortable:!1},hoverrows:!1,width:"1260",rowNum:100,gridview:!0,height:"100%",caption:".: Дизель генераторуудын түлшний хэмжээ :.",beforeSelectRow:function(){return!1},loadComplete:function(){for(var e=$(this).jqGrid("getDataIDs"),t=0;t<e.length;t++){var i=$("#grid").jqGrid("getRowData",e[t]),a=jQuery("#"+e[t],jQuery("#grid"));"208"==i.main_equipment_id&&i.workhour<49&&"3000 л"==i.capacity?(a.removeClass("ui-widget-content"),a.addClass("argent"),console.log("hi its "+i.main_equipment_id)):i.workhour<9&&5==i.bank_id?(a.removeClass("ui-widget-content"),a.addClass("argent")):i.workhour<17&&13==i.bank_id?(a.removeClass("ui-widget-content"),a.addClass("argent")):i.workhour<9&&15==i.bank_id?(a.removeClass("ui-widget-content"),a.addClass("argent")):i.workhour<9&&20==i.bank_id?(a.removeClass("ui-widget-content"),a.addClass("argent")):i.workhour<25&&20!=i.bank_id&&15!=i.bank_id&&13!==i.bank_id&&5!=i.bank_id&&(a.removeClass("ui-widget-content"),a.addClass("argent"))}}})});