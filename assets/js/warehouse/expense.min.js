function inc_action(e,i,n){return"<button onclick='invoiceDel("+i.rowId+")'>Устгах</button>"}function invoiceDel(e){1==confirm("Та, энэ зарлага устгахдаа итгэлтэй байна уу!")&&window.location.assign(base_url+"/warehouse/invoiceDel/"+e+"/no")}$(document).ready(function(){var e=$("#grid");e.jqGrid({url:base_url+"/wm_ajax/expense",datatype:"xml",mtype:"GET",colNames:["Зарлагын №","Огноо","Зориулалт","Хэсэг","Нярав","Хүлээн авсан","Шалгасан Нябо","Үйлдэл"],colModel:[{name:"expense_no",index:"expense_no",width:22,searchoptions:{sopt:["eq","ne"]},search:!0,align:"right"},{name:"expense_date",index:"expense_date",width:25,align:"right"},{name:"intend",index:"intend",width:120},{name:"section",index:"section",width:30},{name:"storeman",index:"storeman",width:30},{name:"receiveby",index:"receiveby",width:30},{name:"checkby",index:"checkby",width:30},{name:"action",width:30,index:"action",align:"right",formatter:inc_action}],pager:jQuery("#pager"),rowNum:15,rowList:[15,20,30],sortname:"expense_no",sortorder:"desc",viewrecords:!0,caption:"Зарлага бүртгэл",autowidth:!0,height:"500",width:"100%",subGrid:!0,subGridRowExpanded:function(e,i){var n;n=e+"_t",jQuery("#"+e).html("<table id='"+n+"' class='scroll'></table>"),jQuery("#"+n).jqGrid({url:base_url+"/wm_ajax/expensedtl?q=2&id="+i,datatype:"xml",colNames:["#","Сэлбэг, материал","Хэмжих нэгж","Тоо/ш"],colModel:[{name:"id",index:"id",width:80,key:!0,align:"right"},{name:"spare",index:"spare",width:200},{name:"measure",index:"measure",width:100,align:"right"},{name:"qty",index:"qty",width:80,align:"right"}],height:"100%",width:600,rowNum:20,sortname:"expense_no",sortorder:"asc"})}}).navGrid("#pager",{edit:!1,add:!1,del:!1,search:!0}),$("#searchbtn").click(function(){jQuery("#grid").jqGrid("searchGrid",{sopt:["eq","ne","cn","bw","lt","gt","ew"]})}),$("#search").click(function(){var i=$("#spare_id").val(),n=$("#spare").val();0==i&&(n=!0)?alert("Ийм сэлбэг байхгүй байна!"):((null==n||""==n)&0!=i&&(i=0),e.jqGrid("setGridParam",{url:base_url+"/wm_ajax/expense?spare_id="+i,page:1}).trigger("reloadGrid"))})});