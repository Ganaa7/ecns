$(document).ready(function(){var e=$("#grid");e.jqGrid({url:base_url+"/wm_ajax/invoice",datatype:"xml",mtype:"GET",colNames:["Сэлбэг №","Огноо","Сэлбэг","Төрөл","Парт №","Хэмжих нэгж","Үлдэгдэл","Төхөөрөмж","Тасаг","Хэсэг"],colModel:[{name:"spare_id",index:"spare_id",width:30,align:"right"},{name:"enddate",index:"enddate",width:40,align:"center"},{name:"spare",index:"spare",width:100},{name:"sparetype",index:"sparetype",width:50},{name:"part_number",index:"part_number",width:40},{name:"measure",index:"measure",width:20,align:"center"},{name:"endQty",index:"endQty",width:50,align:"center"},{name:"equipment",index:"equipment",width:70},{name:"sector",index:"sector",width:50},{name:"section",index:"section",width:50}],pager:jQuery("#pager"),rowNum:15,rowList:[15,30,50,100],sortname:"spare_id",sortorder:"desc",viewrecords:!0,caption:"Агуулахын бүртгэл",autowidth:!0,height:"400",width:"100%",loadComplete:function(){for(var i=$(this).jqGrid("getDataIDs"),r=0;r<i.length;r++){var a=e.jqGrid("getRowData",i[r]),d=jQuery("#"+i[r],jQuery("#grid"));0==a.endQty?(d.removeClass("ui-widget-content"),d.addClass("tr_error")):a.endQty>=1&&a.endQty<=3&&(d.removeClass("ui-widget-content"),d.addClass("tr-warning"))}},subGrid:!0,subGridRowExpanded:function(e,i){var r;r=e+"_t",jQuery("#"+e).html("<table id='"+r+"' class='scroll'></table>"),jQuery("#"+r).jqGrid({url:base_url+"/wm_ajax/invDetail?q=2&id="+i,datatype:"xml",colNames:["#","Агуулах","Тавиур","Тоо хэмжээ"],colModel:[{name:"id",index:"id",width:80,key:!0},{name:"warehouse",index:"warehouse",width:130},{name:"pallet",index:"pallet",width:80,align:"right"},{name:"qty",index:"qty",width:80,align:"right"}],height:"100%",width:600,rowNum:20,sortname:"id",sortorder:"asc"})}}).navGrid("#pager",{edit:!1,add:!1,del:!1,multipleSearch:!0}),$("#searchbtn").click(function(){e.jqGrid("searchGrid",{sopt:["eq","ne","cn","bw","lt","gt","ew"]})}),e.jqGrid("navGrid",{searchOperators:!0},{del:!1,add:!1,edit:!1},{},{},{},{multipleSearch:!0}),$("#filterBy").click(function(){var i=$("#section_id").val(),r=$("#sector_id").val(),a=$("#equipment_id").val();"0"!=i||"0"!=r||"0"!=a?e.jqGrid("setGridParam",{url:base_url+"/wm_ajax/invoice/?section_id="+i+"&sector_id="+r+"&equipment_id="+a,page:1,search:!0}).trigger("reloadGrid"):e.jqGrid("setGridParam",{url:base_url+"/wm_ajax/invoice/wm_ajax",page:1,search:!1}).trigger("reloadGrid")}),$("#search_grid").click(function(){e.setGridParam({url:base_url+"/wm_ajax/invoice",datatype:"xml",sortname:"spare_id",sortorder:"asc"}).trigger("reloadGrid"),$("#section_id").prop("selectedIndex",0),$("#sector_id").prop("selectedIndex",0),$("#equipment_id").prop("selectedIndex",0)})});